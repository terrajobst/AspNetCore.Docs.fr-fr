---
uid: web-api/overview/security/external-authentication-services
title: "Service d’authentification externe avec l’API Web ASP.NET (c#) | Documents Microsoft"
author: rmcmurray
description: "Décrit l’utilisation des Services d’authentification externe dans l’API Web ASP.NET."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/26/2013
ms.topic: article
ms.assetid: 3bb8eb15-b518-44f5-a67d-a27e051aedc6
ms.technology: dotnet-webapi
ms.prod: .net-framework
msc.legacyurl: /web-api/overview/security/external-authentication-services
msc.type: authoredcontent
ms.openlocfilehash: 5d6e6727f387d047e7b41a6efa0d2dadf467558e
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/10/2017
---
<a name="external-authentication-services-with-aspnet-web-api-c"></a><span data-ttu-id="b419f-103">Service d’authentification externe avec l’API Web ASP.NET (c#)</span><span class="sxs-lookup"><span data-stu-id="b419f-103">External Authentication Services with ASP.NET Web API (C#)</span></span>
====================
<span data-ttu-id="b419f-104">par [Robert McMurray](https://github.com/rmcmurray)</span><span class="sxs-lookup"><span data-stu-id="b419f-104">by [Robert McMurray](https://github.com/rmcmurray)</span></span>

<span data-ttu-id="b419f-105">Visual Studio 2013 et ASP.NET 4.5.1 développer les options de sécurité pour [Single Page Applications](../../../single-page-application/index.md) (SPA) et [API Web](../../index.md) des services d’authentification externe, qui incluent plusieurs services OAuth/OpenID et les services d’authentification des médias sociaux : Accounts Microsoft, Twitter, Facebook et Google.</span><span class="sxs-lookup"><span data-stu-id="b419f-105">Visual Studio 2013 and ASP.NET 4.5.1 expand the security options for [Single Page Applications](../../../single-page-application/index.md) (SPA) and [Web API](../../index.md) services to integrate with external authentication services, which include several OAuth/OpenID and social media authentication services: Microsoft Accounts, Twitter, Facebook, and Google.</span></span>

### <a name="in-this-walkthrough"></a><span data-ttu-id="b419f-106">Dans cette procédure pas à pas</span><span class="sxs-lookup"><span data-stu-id="b419f-106">In This Walkthrough</span></span>

- [<span data-ttu-id="b419f-107">À l’aide des Services d’authentification externe</span><span class="sxs-lookup"><span data-stu-id="b419f-107">Using External Authentication Services</span></span>](#USING)
- [<span data-ttu-id="b419f-108">Création de l’exemple d’Application Web</span><span class="sxs-lookup"><span data-stu-id="b419f-108">Creating the Sample Web Application</span></span>](#SAMPLE)
- [<span data-ttu-id="b419f-109">L’activation de l’authentification Facebook</span><span class="sxs-lookup"><span data-stu-id="b419f-109">Enabling Facebook Authentication</span></span>](#FACEBOOK)
- [<span data-ttu-id="b419f-110">Activation de l’authentification de Google</span><span class="sxs-lookup"><span data-stu-id="b419f-110">Enabling Google Authentication</span></span>](#GOOGLE)
- [<span data-ttu-id="b419f-111">Activer l’authentification Microsoft</span><span class="sxs-lookup"><span data-stu-id="b419f-111">Enabling Microsoft Authentication</span></span>](#MICROSOFT)
- [<span data-ttu-id="b419f-112">L’activation de l’authentification Twitter</span><span class="sxs-lookup"><span data-stu-id="b419f-112">Enabling Twitter Authentication</span></span>](#TWITTER)
- [<span data-ttu-id="b419f-113">Informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b419f-113">Additional Information</span></span>](#MOREINFO)

    - [<span data-ttu-id="b419f-114">Combinaison de Services d’authentification externe</span><span class="sxs-lookup"><span data-stu-id="b419f-114">Combining External Authentication Services</span></span>](#COMBINE)
    - [<span data-ttu-id="b419f-115">Configuration d’IIS Express à utiliser un nom de domaine complet</span><span class="sxs-lookup"><span data-stu-id="b419f-115">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>](#FQDN)
    - [<span data-ttu-id="b419f-116">Comment obtenir les paramètres de votre Application pour l’authentification Microsoft</span><span class="sxs-lookup"><span data-stu-id="b419f-116">How to Obtain your Application Settings for Microsoft Authentication</span></span>](#OBTAIN)
    - [<span data-ttu-id="b419f-117">Facultatif : Désactiver l’inscription du Local</span><span class="sxs-lookup"><span data-stu-id="b419f-117">Optional: Disable Local Registration</span></span>](#DISABLE)

### <a name="prerequisites"></a><span data-ttu-id="b419f-118">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="b419f-118">Prerequisites</span></span>

<span data-ttu-id="b419f-119">Pour suivre les exemples de cette procédure pas à pas, vous devez disposer des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="b419f-119">To follow the examples in this walkthrough, you need to have the following:</span></span>

- <span data-ttu-id="b419f-120">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="b419f-120">Visual Studio 2013</span></span>
- <span data-ttu-id="b419f-121">Un compte pour au moins un des services d’authentification externes suivants :</span><span class="sxs-lookup"><span data-stu-id="b419f-121">An account for at least one of the following external authentication services:</span></span>

    - <span data-ttu-id="b419f-122">Un compte d’utilisateur Google</span><span class="sxs-lookup"><span data-stu-id="b419f-122">A Google user account</span></span>
    - <span data-ttu-id="b419f-123">Un compte de développeur avec l’identificateur de l’application et de la clé secrète pour un des services sociaux d’authentification suivants :</span><span class="sxs-lookup"><span data-stu-id="b419f-123">A developer account with the application identifier and secret key for one of the following social media authentication services:</span></span>

        - <span data-ttu-id="b419f-124">Les comptes Microsoft ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span><span class="sxs-lookup"><span data-stu-id="b419f-124">Microsoft Accounts ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span></span>
        - <span data-ttu-id="b419f-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span><span class="sxs-lookup"><span data-stu-id="b419f-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span></span>
        - <span data-ttu-id="b419f-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span><span class="sxs-lookup"><span data-stu-id="b419f-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span></span>

<a id="USING"></a>
## <a name="using-external-authentication-services"></a><span data-ttu-id="b419f-127">À l’aide des Services d’authentification externe</span><span class="sxs-lookup"><span data-stu-id="b419f-127">Using External Authentication Services</span></span>

<span data-ttu-id="b419f-128">La multitude de services d’authentification externe qui sont actuellement disponibles à l’aide les développeurs web afin de réduire le développement du temps lors de la création d’applications web.</span><span class="sxs-lookup"><span data-stu-id="b419f-128">The abundance of external authentication services that are currently available to web developers help to reduce development time when creating new web applications.</span></span> <span data-ttu-id="b419f-129">Les utilisateurs Web ont généralement plusieurs comptes existants pour les services web les plus courants et des sites Web sociaux, par conséquent, lorsqu’un web application implémente l’authentification des services à partir d’un service web externe ou un site Web de médias sociaux, il enregistre le temps de développement qui serait ont été passé à la création d’une implémentation d’authentification.</span><span class="sxs-lookup"><span data-stu-id="b419f-129">Web users typically have several existing accounts for popular web services and social media websites, therefore when a web application implements the authentication services from an external web service or social media website, it saves the development time that would have been spent creating an authentication implementation.</span></span> <span data-ttu-id="b419f-130">À l’aide d’un service d’authentification externe enregistre les utilisateurs finaux de créer un autre compte pour votre application web, ainsi que d’avoir à mémoriser un autre nom d’utilisateur et mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b419f-130">Using an external authentication service saves end users from having to create another account for your web application, and also from having to remember another username and password.</span></span>

<span data-ttu-id="b419f-131">Dans le passé, les développeurs ont dû deux possibilités : créer leur propre implémentation de l’authentification ou de savoir comment intégrer un service d’authentification externe dans leurs applications.</span><span class="sxs-lookup"><span data-stu-id="b419f-131">In the past, developers have had two choices: create their own authentication implementation, or learn how to integrate an external authentication service into their applications.</span></span> <span data-ttu-id="b419f-132">Niveau de base au plus, le diagramme suivant illustre un flux de requête simple d’un agent utilisateur (navigateur web) qui demande des informations à partir d’une application web qui est configurée pour utiliser un service d’authentification externes :</span><span class="sxs-lookup"><span data-stu-id="b419f-132">At the most basic level, the following diagram illustrates a simple request flow for a user agent (web browser) that is requesting information from a web application that is configured to use an external authentication service:</span></span>

<span data-ttu-id="b419f-133">[![](external-authentication-services/_static/image2.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-133">[![](external-authentication-services/_static/image2.png "Click to Expand the Image")](external-authentication-services/_static/image1.png)</span></span>

<span data-ttu-id="b419f-134">Dans le diagramme précédent, l’agent utilisateur (ou un navigateur web dans cet exemple) effectue une demande à une application web, qui redirige le navigateur web à un service d’authentification externe.</span><span class="sxs-lookup"><span data-stu-id="b419f-134">In the preceding diagram, the user agent (or web browser in this example) makes a request to a web application, which redirects the web browser to an external authentication service.</span></span> <span data-ttu-id="b419f-135">L’agent utilisateur envoie ses informations d’identification au service d’authentification externe, et si l’agent utilisateur a été authentifié, le service d’authentification externe redirige l’agent utilisateur à l’application web d’origine avec une certaine forme de jeton dont la agent utilisateur envoie à l’application web.</span><span class="sxs-lookup"><span data-stu-id="b419f-135">The user agent sends its credentials to the external authentication service, and if the user agent has successfully authenticated, the external authentication service will redirect the user agent to the original web application with some form of token which the user agent will send to the web application.</span></span> <span data-ttu-id="b419f-136">L’application web utilisera le jeton pour vérifier que l’agent utilisateur a bien été authentifié par le service d’authentification externe, et l’application web peut utiliser le jeton pour collecter plus d’informations sur l’agent utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b419f-136">The web application will use the token to verify that the user agent has been successfully authenticated by the external authentication service, and the web application may use the token to gather more information about the user agent.</span></span> <span data-ttu-id="b419f-137">Une fois que l’application est terminée le traitement des informations de l’agent utilisateur, l’application web retourne la réponse adéquate à l’agent utilisateur en fonction de ses paramètres d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="b419f-137">Once the application is done processing the user agent's information, the web application will return the appropriate response to the user agent based on its authorization settings.</span></span>

<span data-ttu-id="b419f-138">Dans ce deuxième exemple, l’agent utilisateur négocie avec l’application web et le serveur d’autorisation externes et l’application web effectue une communication supplémentaire avec le serveur d’autorisation externes pour extraire des informations supplémentaires sur l’utilisateur agent :</span><span class="sxs-lookup"><span data-stu-id="b419f-138">In this second example, the user agent negotiates with the web application and external authorization server, and the web application performs additional communication with the external authorization server to retrieve additional information about the user agent:</span></span>

<span data-ttu-id="b419f-139">[![](external-authentication-services/_static/image4.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-139">[![](external-authentication-services/_static/image4.png "Click to Expand the Image")](external-authentication-services/_static/image3.png)</span></span>

<span data-ttu-id="b419f-140">Visual Studio 2013 et ASP.NET 4.5.1 facilitent l’intégration avec les services d’authentification externe pour les développeurs en fournissant une intégration intégrée pour les services d’authentification suivants :</span><span class="sxs-lookup"><span data-stu-id="b419f-140">Visual Studio 2013 and ASP.NET 4.5.1 make integration with external authentication services easier for developers by providing built-in integration for the following authentication services:</span></span>

- <span data-ttu-id="b419f-141">Facebook</span><span class="sxs-lookup"><span data-stu-id="b419f-141">Facebook</span></span>
- <span data-ttu-id="b419f-142">Google</span><span class="sxs-lookup"><span data-stu-id="b419f-142">Google</span></span>
- <span data-ttu-id="b419f-143">Microsoft Accounts (comptes Windows Live ID)</span><span class="sxs-lookup"><span data-stu-id="b419f-143">Microsoft Accounts (Windows Live ID accounts)</span></span>
- <span data-ttu-id="b419f-144">Twitter</span><span class="sxs-lookup"><span data-stu-id="b419f-144">Twitter</span></span>

<span data-ttu-id="b419f-145">Les exemples de cette procédure pas à pas va vous montrer comment configurer chacun des services d’authentification externes pris en charge en utilisant le nouveau modèle d’Application Web ASP.NET qui est fourni avec Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="b419f-145">The examples in this walkthrough will demonstrate how to configure each of the supported external authentication services by using the new ASP.NET Web Application template that ships with Visual Studio 2013.</span></span>

> [!NOTE]
> <span data-ttu-id="b419f-146">Si nécessaire, vous devrez peut-être ajouter votre nom de domaine complet pour les paramètres de votre service d’authentification externe.</span><span class="sxs-lookup"><span data-stu-id="b419f-146">If necessary, you may need to add your FQDN to the settings for your external authentication service.</span></span> <span data-ttu-id="b419f-147">Cette condition est basée sur les contraintes de sécurité pour certains services d’authentification externe qui requièrent le nom de domaine complet dans vos paramètres d’application faire correspondre le nom de domaine complet qui est utilisée par vos clients.</span><span class="sxs-lookup"><span data-stu-id="b419f-147">This requirement is based on security constraints for some external authentication services which require the FQDN in your application settings to match the FQDN that is used by your clients.</span></span> <span data-ttu-id="b419f-148">(Les étapes de ce varient considérablement pour chaque service d’authentification externe ; vous devez consulter la documentation pour chaque service d’authentification externe pour voir si cela est nécessaire et comment configurer ces paramètres). Si vous avez besoin de configurer IIS Express à utiliser un nom de domaine complet pour le test de cet environnement, consultez le [configuration IIS Express à utiliser un nom de domaine complet](#FQDN) section plus loin dans cette procédure pas à pas.</span><span class="sxs-lookup"><span data-stu-id="b419f-148">(The steps for this will vary greatly for each external authentication service; you will need to consult the documentation for each external authentication service to see if this is required and how to configure these settings.) If you need to configure IIS Express to use an FQDN for testing this environment, see the [Configuring IIS Express to use a Fully Qualified Domain Name](#FQDN) section later in this walkthrough.</span></span>


<a id="SAMPLE"></a>
## <a name="creating-a-sample-web-application"></a><span data-ttu-id="b419f-149">Création d’un exemple d’Application Web</span><span class="sxs-lookup"><span data-stu-id="b419f-149">Creating a Sample Web Application</span></span>

<span data-ttu-id="b419f-150">La procédure suivante vous guide dans la création d’un exemple d’application en utilisant le modèle d’Application Web ASP.NET, et que vous utiliserez cet exemple d’application pour chacun des services d’authentification externe plus loin dans cette procédure pas à pas.</span><span class="sxs-lookup"><span data-stu-id="b419f-150">The following steps will lead you through creating a sample application by using the ASP.NET Web Application template, and you will use this sample application for each of the external authentication services later in this walkthrough.</span></span>

<span data-ttu-id="b419f-151">Démarrez Visual Studio 2013 sélectionnez **nouveau projet** à partir de la page de démarrage.</span><span class="sxs-lookup"><span data-stu-id="b419f-151">Start Visual Studio 2013 select **New Project** from the Start page.</span></span> <span data-ttu-id="b419f-152">Ou, à partir de la **fichier** menu, sélectionnez **nouveau** , puis **projet**.</span><span class="sxs-lookup"><span data-stu-id="b419f-152">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="b419f-153">[![](external-authentication-services/_static/image6.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-153">[![](external-authentication-services/_static/image6.png "Click to Expand the Image")](external-authentication-services/_static/image5.png)</span></span>

<span data-ttu-id="b419f-154">Lorsque le **nouveau projet** boîte de dialogue s’affiche, sélectionnez **installé** **modèles** et développez **Visual C#**.</span><span class="sxs-lookup"><span data-stu-id="b419f-154">When the **New Project** dialog box is displayed, select **Installed** **Templates** and expand **Visual C#**.</span></span> <span data-ttu-id="b419f-155">Sous **Visual C#**, sélectionnez **Web**.</span><span class="sxs-lookup"><span data-stu-id="b419f-155">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="b419f-156">Dans la liste des modèles de projet, sélectionnez **Application Web ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="b419f-156">In the list of project templates, select **ASP.NET Web Application**.</span></span> <span data-ttu-id="b419f-157">Entrez un nom pour votre projet et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="b419f-157">Enter a name for your project and click **OK**.</span></span>

<span data-ttu-id="b419f-158">[![](external-authentication-services/_static/image8.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-158">[![](external-authentication-services/_static/image8.png "Click to Expand the Image")](external-authentication-services/_static/image7.png)</span></span>

<span data-ttu-id="b419f-159">Lorsque le **nouveau projet ASP.NET** est affichée, sélectionnez le **SPA** modèle et cliquez sur **créer un projet de**.</span><span class="sxs-lookup"><span data-stu-id="b419f-159">When the **New ASP.NET Project** is displayed, select the **SPA** template and click **Create Project**.</span></span>

<span data-ttu-id="b419f-160">[![](external-authentication-services/_static/image10.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-160">[![](external-authentication-services/_static/image10.png "Click to Expand the Image")](external-authentication-services/_static/image9.png)</span></span>

<span data-ttu-id="b419f-161">Attendez que Visual Studio 2013 crée votre projet.</span><span class="sxs-lookup"><span data-stu-id="b419f-161">Wait as Visual Studio 2013 creates your project.</span></span>

<span data-ttu-id="b419f-162">[![](external-authentication-services/_static/image12.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-162">[![](external-authentication-services/_static/image12.png "Click to Expand the Image")](external-authentication-services/_static/image11.png)</span></span>

<span data-ttu-id="b419f-163">Lorsque Visual Studio 2013 a terminé la création de votre projet, ouvrez le *Startup.Auth.cs* fichier qui se trouve dans le **application\_Démarrer** dossier.</span><span class="sxs-lookup"><span data-stu-id="b419f-163">When Visual Studio 2013 has finished creating your project, open the *Startup.Auth.cs* file that is located in the **App\_Start** folder.</span></span>

<span data-ttu-id="b419f-164">[![](external-authentication-services/_static/image14.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-164">[![](external-authentication-services/_static/image14.png "Click to Expand the Image")](external-authentication-services/_static/image13.png)</span></span>

<span data-ttu-id="b419f-165">Lorsque vous créez le projet, aucun des services d’authentification externe sont activées dans *Startup.Auth.cs* fichier ; ce qui suit illustre ce que votre code doit ressembler, avec les sections en surbrillance où vous devriez autoriser service d’authentification externe et tous les paramètres appropriés pour pouvoir utiliser l’authentification Microsoft Accounts, Twitter, Facebook ou Google avec votre application ASP.NET :</span><span class="sxs-lookup"><span data-stu-id="b419f-165">When you first create the project, none of the external authentication services are enabled in *Startup.Auth.cs* file; the following illustrates what your code might resemble, with the sections highlighted for where you would enable an external authentication service and any relevant settings in order to use Microsoft Accounts, Twitter, Facebook, or Google authentication with your ASP.NET application:</span></span>

[!code-csharp[Main](external-authentication-services/samples/sample1.cs)]

<span data-ttu-id="b419f-166">Lorsque vous appuyez sur F5 pour générer et déboguer votre application web, il affiche un écran de connexion où vous verrez qu’aucun service d’authentification externe n’a été défini.</span><span class="sxs-lookup"><span data-stu-id="b419f-166">When you press F5 to build and debug your web application, it will display a login screen where you will see that no external authentication services have been defined.</span></span>

<span data-ttu-id="b419f-167">[![](external-authentication-services/_static/image16.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-167">[![](external-authentication-services/_static/image16.png "Click to Expand the Image")](external-authentication-services/_static/image15.png)</span></span>

<span data-ttu-id="b419f-168">Dans les sections suivantes, vous allez apprendre à activer le service d’authentification externe qui est fournies avec ASP.NET dans Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="b419f-168">In the following sections, you will learn how to enable each of the external authentication services that are provided with ASP.NET in Visual Studio 2013.</span></span>

<a id="FACEBOOK"></a>
## <a name="enabling-facebook-authentication"></a><span data-ttu-id="b419f-169">L’activation de l’authentification Facebook</span><span class="sxs-lookup"><span data-stu-id="b419f-169">Enabling Facebook Authentication</span></span>

<span data-ttu-id="b419f-170">À l’aide de Facebook, vous devez créer un compte de développeur Facebook et votre projet nécessite un ID d’application et de la clé secrète à partir de Facebook pour pouvoir fonctionner.</span><span class="sxs-lookup"><span data-stu-id="b419f-170">Using Facebook authentication requires you to create a Facebook developer account, and your project will require an application ID and secret key from Facebook in order to function.</span></span> <span data-ttu-id="b419f-171">Pour plus d’informations sur la création d’un compte de développeur Facebook et l’obtention de votre ID d’application et de la clé secrète, consultez [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="b419f-171">For information about creating a Facebook developer account and obtaining your application ID and secret key, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="b419f-172">Une fois, vous avez obtenu votre ID d’application et de la clé secrète, procédez comme suit pour activer l’authentification Facebook pour votre application web :</span><span class="sxs-lookup"><span data-stu-id="b419f-172">Once you have obtained your application ID and secret key, use the following steps to enable Facebook authentication for your web application:</span></span>

1. <span data-ttu-id="b419f-173">Lorsque votre projet est ouvert dans Visual Studio 2013, ouvrez le *Startup.Auth.cs* fichier :</span><span class="sxs-lookup"><span data-stu-id="b419f-173">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="b419f-174">[![](external-authentication-services/_static/image18.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-174">[![](external-authentication-services/_static/image18.png "Click to Expand the Image")](external-authentication-services/_static/image17.png)</span></span>
2. <span data-ttu-id="b419f-175">Recherchez la section de code en surbrillance :</span><span class="sxs-lookup"><span data-stu-id="b419f-175">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample2.cs)]
3. <span data-ttu-id="b419f-176">Supprimer le &quot; // &quot; caractères pour ne pas commenter les lignes en surbrillance du code, puis ajoutez votre ID d’application et de la clé secrète.</span><span class="sxs-lookup"><span data-stu-id="b419f-176">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your application ID and secret key.</span></span> <span data-ttu-id="b419f-177">Une fois que vous avez ajouté ces paramètres, vous pouvez recompiler votre projet :</span><span class="sxs-lookup"><span data-stu-id="b419f-177">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample3.cs)]
4. <span data-ttu-id="b419f-178">Lorsque vous appuyez sur F5 pour ouvrir votre application web dans votre navigateur web, vous verrez que Facebook a été défini comme un service d’authentification externes :</span><span class="sxs-lookup"><span data-stu-id="b419f-178">When you press F5 to open your web application in your web browser, you will see that Facebook has been defined as an external authentication service:</span></span>

    <span data-ttu-id="b419f-179">[![](external-authentication-services/_static/image20.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-179">[![](external-authentication-services/_static/image20.png "Click to Expand the Image")](external-authentication-services/_static/image19.png)</span></span>
5. <span data-ttu-id="b419f-180">Lorsque vous cliquez sur le **Facebook** bouton, votre navigateur sera redirigé vers la page de connexion Facebook :</span><span class="sxs-lookup"><span data-stu-id="b419f-180">When you click the **Facebook** button, your browser will be redirected to the Facebook login page:</span></span>

    <span data-ttu-id="b419f-181">[![](external-authentication-services/_static/image22.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-181">[![](external-authentication-services/_static/image22.png "Click to Expand the Image")](external-authentication-services/_static/image21.png)</span></span>
6. <span data-ttu-id="b419f-182">Une fois que vous entrez vos informations d’identification de Facebook, cliquez sur **connecter**, votre navigateur web sera redirigé vers votre application web, qui vous invite à entrer le **nom d’utilisateur** que vous souhaitez associer à votre Compte Facebook :</span><span class="sxs-lookup"><span data-stu-id="b419f-182">After you enter your Facebook credentials and click **Log in**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Facebook account:</span></span>

    <span data-ttu-id="b419f-183">[![](external-authentication-services/_static/image24.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-183">[![](external-authentication-services/_static/image24.png "Click to Expand the Image")](external-authentication-services/_static/image23.png)</span></span>
7. <span data-ttu-id="b419f-184">Après avoir entré votre nom d’utilisateur et un clic sur le **inscrire** bouton, votre application web affichera la valeur par défaut **page d’accueil** pour votre compte Facebook :</span><span class="sxs-lookup"><span data-stu-id="b419f-184">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Facebook account:</span></span>

    <span data-ttu-id="b419f-185">[![](external-authentication-services/_static/image26.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-185">[![](external-authentication-services/_static/image26.png "Click to Expand the Image")](external-authentication-services/_static/image25.png)</span></span>

<a id="GOOGLE"></a>
## <a name="enabling-google-authentication"></a><span data-ttu-id="b419f-186">Activation de l’authentification de Google</span><span class="sxs-lookup"><span data-stu-id="b419f-186">Enabling Google Authentication</span></span>

<span data-ttu-id="b419f-187">Google est de loin la plus simple des services d’authentification externe à activer, car il ne nécessite pas un compte de développeur, et aucune des informations supplémentaires telles que votre ID d’application ou d’une clé secrète que les autres services d’authentification externe nécessitent.</span><span class="sxs-lookup"><span data-stu-id="b419f-187">Google is by far the easiest of the external authentication services to enable because it doesn't require a developer account, nor does it require additional information like your application ID or secret key as the other external authentication services necessitate.</span></span>

<span data-ttu-id="b419f-188">Pour activer l’authentification de Google pour votre application web, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="b419f-188">To enable Google authentication for your web application, use the following steps:</span></span>

1. <span data-ttu-id="b419f-189">Lorsque votre projet est ouvert dans Visual Studio 2013, ouvrez le *Startup.Auth.cs* fichier :</span><span class="sxs-lookup"><span data-stu-id="b419f-189">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="b419f-190">[![](external-authentication-services/_static/image28.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-190">[![](external-authentication-services/_static/image28.png "Click to Expand the Image")](external-authentication-services/_static/image27.png)</span></span>
2. <span data-ttu-id="b419f-191">Recherchez la section de code en surbrillance :</span><span class="sxs-lookup"><span data-stu-id="b419f-191">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample4.cs)]
3. <span data-ttu-id="b419f-192">Supprimer le &quot; // &quot; caractères et ne commentez pas la ligne de code en surbrillance, puis recompiler votre projet :</span><span class="sxs-lookup"><span data-stu-id="b419f-192">Remove the &quot;//&quot; characters to uncomment the highlighted line of code, and then recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample5.cs)]
4. <span data-ttu-id="b419f-193">Lorsque vous appuyez sur F5 pour ouvrir votre application web dans votre navigateur web, vous verrez que Google a été défini comme un service d’authentification externes :</span><span class="sxs-lookup"><span data-stu-id="b419f-193">When you press F5 to open your web application in your web browser, you will see that Google has been defined as an external authentication service:</span></span>

    <span data-ttu-id="b419f-194">[![](external-authentication-services/_static/image30.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-194">[![](external-authentication-services/_static/image30.png "Click to Expand the Image")](external-authentication-services/_static/image29.png)</span></span>
5. <span data-ttu-id="b419f-195">Lorsque vous cliquez sur le **Google** bouton, votre navigateur sera redirigé vers la page de connexion de Google :</span><span class="sxs-lookup"><span data-stu-id="b419f-195">When you click the **Google** button, your browser will be redirected to the Google login page:</span></span>

    <span data-ttu-id="b419f-196">[![](external-authentication-services/_static/image32.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-196">[![](external-authentication-services/_static/image32.png "Click to Expand the Image")](external-authentication-services/_static/image31.png)</span></span>
6. <span data-ttu-id="b419f-197">Une fois que vous entrez vos informations d’identification Google et cliquez sur **connecter**, Google vous invite à vérifier que votre application web dispose des autorisations pour accéder à votre compte Google :</span><span class="sxs-lookup"><span data-stu-id="b419f-197">After you enter your Google credentials and click **Sign in**, Google will prompt you to verify that your web application has permissions to access your Google account:</span></span>

    <span data-ttu-id="b419f-198">[![](external-authentication-services/_static/image34.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-198">[![](external-authentication-services/_static/image34.png "Click to Expand the Image")](external-authentication-services/_static/image33.png)</span></span>
7. <span data-ttu-id="b419f-199">Lorsque vous cliquez sur **accepter**, votre navigateur web sera redirigé vers votre application web, qui vous invite à entrer le **nom d’utilisateur** que vous souhaitez associer à votre compte Google :</span><span class="sxs-lookup"><span data-stu-id="b419f-199">When you click **Accept**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Google account:</span></span>

    <span data-ttu-id="b419f-200">[![](external-authentication-services/_static/image36.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-200">[![](external-authentication-services/_static/image36.png "Click to Expand the Image")](external-authentication-services/_static/image35.png)</span></span>
8. <span data-ttu-id="b419f-201">Après avoir entré votre nom d’utilisateur et un clic sur le **inscrire** bouton, votre application web affichera la valeur par défaut **page d’accueil** pour votre compte Google :</span><span class="sxs-lookup"><span data-stu-id="b419f-201">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Google account:</span></span>

    <span data-ttu-id="b419f-202">[![](external-authentication-services/_static/image38.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-202">[![](external-authentication-services/_static/image38.png "Click to Expand the Image")](external-authentication-services/_static/image37.png)</span></span>

<a id="MICROSOFT"></a>
## <a name="enabling-microsoft-authentication"></a><span data-ttu-id="b419f-203">Activer l’authentification Microsoft</span><span class="sxs-lookup"><span data-stu-id="b419f-203">Enabling Microsoft Authentication</span></span>

<span data-ttu-id="b419f-204">Microsoft, vous devez créer un compte de développeur, et nécessite un ID client et la clé secrète du client afin de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="b419f-204">Microsoft authentication requires you to create a developer account, and it requires a client ID and client secret in order to function.</span></span> <span data-ttu-id="b419f-205">Pour plus d’informations sur la création d’un compte de développeur Microsoft et obtenir votre ID client et la clé secrète du client, consultez [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070).</span><span class="sxs-lookup"><span data-stu-id="b419f-205">For information about creating a Microsoft developer account and obtaining your client ID and client secret, see [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070).</span></span>

<span data-ttu-id="b419f-206">Une fois, vous avez obtenu votre clé de consommateur et de la question secrète du client, procédez comme suit pour activer l’authentification de Microsoft pour votre application web :</span><span class="sxs-lookup"><span data-stu-id="b419f-206">Once you have obtained your consumer key and consumer secret, use the following steps to enable Microsoft authentication for your web application:</span></span>

1. <span data-ttu-id="b419f-207">Lorsque votre projet est ouvert dans Visual Studio 2013, ouvrez le *Startup.Auth.cs* fichier :</span><span class="sxs-lookup"><span data-stu-id="b419f-207">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="b419f-208">[![](external-authentication-services/_static/image40.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-208">[![](external-authentication-services/_static/image40.png "Click to Expand the Image")](external-authentication-services/_static/image39.png)</span></span>
2. <span data-ttu-id="b419f-209">Recherchez la section de code en surbrillance :</span><span class="sxs-lookup"><span data-stu-id="b419f-209">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample6.cs)]
3. <span data-ttu-id="b419f-210">Supprimer le &quot; // &quot; caractères pour ne pas commenter les lignes en surbrillance du code, puis ajoutez votre ID client et la clé secrète du client.</span><span class="sxs-lookup"><span data-stu-id="b419f-210">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your client ID and client secret.</span></span> <span data-ttu-id="b419f-211">Une fois que vous avez ajouté ces paramètres, vous pouvez recompiler votre projet :</span><span class="sxs-lookup"><span data-stu-id="b419f-211">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample7.cs)]
4. <span data-ttu-id="b419f-212">Lorsque vous appuyez sur F5 pour ouvrir votre application web dans votre navigateur web, vous verrez que Microsoft a été défini comme un service d’authentification externes :</span><span class="sxs-lookup"><span data-stu-id="b419f-212">When you press F5 to open your web application in your web browser, you will see that Microsoft has been defined as an external authentication service:</span></span>

    <span data-ttu-id="b419f-213">[![](external-authentication-services/_static/image42.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-213">[![](external-authentication-services/_static/image42.png "Click to Expand the Image")](external-authentication-services/_static/image41.png)</span></span>
5. <span data-ttu-id="b419f-214">Lorsque vous cliquez sur le **Microsoft** bouton, votre navigateur sera redirigé vers la page de connexion de Microsoft :</span><span class="sxs-lookup"><span data-stu-id="b419f-214">When you click the **Microsoft** button, your browser will be redirected to the Microsoft login page:</span></span>

    <span data-ttu-id="b419f-215">[![](external-authentication-services/_static/image44.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-215">[![](external-authentication-services/_static/image44.png "Click to Expand the Image")](external-authentication-services/_static/image43.png)</span></span>
6. <span data-ttu-id="b419f-216">Une fois que vous entrez vos informations d’identification de Microsoft, cliquez sur **connecter**, vous devrez vérifier que votre application web dispose des autorisations pour accéder à votre compte Microsoft :</span><span class="sxs-lookup"><span data-stu-id="b419f-216">After you enter your Microsoft credentials and click **Sign in**, you will be prompted to verify that your web application has permissions to access your Microsoft account:</span></span>

    <span data-ttu-id="b419f-217">[![](external-authentication-services/_static/image46.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-217">[![](external-authentication-services/_static/image46.png "Click to Expand the Image")](external-authentication-services/_static/image45.png)</span></span>
7. <span data-ttu-id="b419f-218">Lorsque vous cliquez sur **Oui**, votre navigateur web sera redirigé vers votre application web, qui vous invite à entrer le **nom d’utilisateur** que vous souhaitez associer à votre compte Microsoft :</span><span class="sxs-lookup"><span data-stu-id="b419f-218">When you click **Yes**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Microsoft account:</span></span>

    <span data-ttu-id="b419f-219">[![](external-authentication-services/_static/image48.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-219">[![](external-authentication-services/_static/image48.png "Click to Expand the Image")](external-authentication-services/_static/image47.png)</span></span>
8. <span data-ttu-id="b419f-220">Après avoir entré votre nom d’utilisateur et un clic sur le **inscrire** bouton, votre application web affichera la valeur par défaut **page d’accueil** pour votre compte Microsoft :</span><span class="sxs-lookup"><span data-stu-id="b419f-220">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Microsoft account:</span></span>

    <span data-ttu-id="b419f-221">[![](external-authentication-services/_static/image50.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-221">[![](external-authentication-services/_static/image50.png "Click to Expand the Image")](external-authentication-services/_static/image49.png)</span></span>

<a id="TWITTER"></a>
## <a name="enabling-twitter-authentication"></a><span data-ttu-id="b419f-222">L’activation de l’authentification Twitter</span><span class="sxs-lookup"><span data-stu-id="b419f-222">Enabling Twitter Authentication</span></span>

<span data-ttu-id="b419f-223">Twitter, vous devez créer un compte de développeur, et nécessite une clé de consommateur et le secret de consommateur afin de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="b419f-223">Twitter authentication requires you to create a developer account, and it requires a consumer key and consumer secret in order to function.</span></span> <span data-ttu-id="b419f-224">Pour plus d’informations sur la création d’un compte de développeur Twitter et l’obtention de votre clé de consommateur et de la question secrète du client, consultez [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="b419f-224">For information about creating a Twitter developer account and obtaining your consumer key and consumer secret, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="b419f-225">Une fois, vous avez obtenu votre clé de consommateur et de la question secrète du client, procédez comme suit pour activer l’authentification Twitter pour votre application web :</span><span class="sxs-lookup"><span data-stu-id="b419f-225">Once you have obtained your consumer key and consumer secret, use the following steps to enable Twitter authentication for your web application:</span></span>

1. <span data-ttu-id="b419f-226">Lorsque votre projet est ouvert dans Visual Studio 2013, ouvrez le *Startup.Auth.cs* fichier :</span><span class="sxs-lookup"><span data-stu-id="b419f-226">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="b419f-227">[![](external-authentication-services/_static/image52.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-227">[![](external-authentication-services/_static/image52.png "Click to Expand the Image")](external-authentication-services/_static/image51.png)</span></span>
2. <span data-ttu-id="b419f-228">Recherchez la section de code en surbrillance :</span><span class="sxs-lookup"><span data-stu-id="b419f-228">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample8.cs)]
3. <span data-ttu-id="b419f-229">Supprimer le &quot; // &quot; caractères pour ne pas commenter les lignes en surbrillance du code, puis ajoutez votre clé de consommateur et le secret de consommateur.</span><span class="sxs-lookup"><span data-stu-id="b419f-229">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your consumer key and consumer secret.</span></span> <span data-ttu-id="b419f-230">Une fois que vous avez ajouté ces paramètres, vous pouvez recompiler votre projet :</span><span class="sxs-lookup"><span data-stu-id="b419f-230">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample9.cs)]
4. <span data-ttu-id="b419f-231">Lorsque vous appuyez sur F5 pour ouvrir votre application web dans votre navigateur web, vous verrez que Twitter a été défini comme un service d’authentification externes :</span><span class="sxs-lookup"><span data-stu-id="b419f-231">When you press F5 to open your web application in your web browser, you will see that Twitter has been defined as an external authentication service:</span></span>

    <span data-ttu-id="b419f-232">[![](external-authentication-services/_static/image54.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-232">[![](external-authentication-services/_static/image54.png "Click to Expand the Image")](external-authentication-services/_static/image53.png)</span></span>
5. <span data-ttu-id="b419f-233">Lorsque vous cliquez sur le **Twitter** bouton, votre navigateur sera redirigé vers la page de connexion Twitter :</span><span class="sxs-lookup"><span data-stu-id="b419f-233">When you click the **Twitter** button, your browser will be redirected to the Twitter login page:</span></span>

    <span data-ttu-id="b419f-234">[![](external-authentication-services/_static/image56.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-234">[![](external-authentication-services/_static/image56.png "Click to Expand the Image")](external-authentication-services/_static/image55.png)</span></span>
6. <span data-ttu-id="b419f-235">Une fois que vous entrez vos informations d’identification Twitter, cliquez sur **Authorize application**, votre navigateur web sera redirigé vers votre application web, qui vous invite à entrer le **nom d’utilisateur** que vous souhaitez associer à votre compte Twitter :</span><span class="sxs-lookup"><span data-stu-id="b419f-235">After you enter your Twitter credentials and click **Authorize app**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Twitter account:</span></span>

    <span data-ttu-id="b419f-236">[![](external-authentication-services/_static/image58.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-236">[![](external-authentication-services/_static/image58.png "Click to Expand the Image")](external-authentication-services/_static/image57.png)</span></span>
7. <span data-ttu-id="b419f-237">Après avoir entré votre nom d’utilisateur et un clic sur le **inscrire** bouton, votre application web affichera la valeur par défaut **page d’accueil** pour votre compte Twitter :</span><span class="sxs-lookup"><span data-stu-id="b419f-237">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Twitter account:</span></span>

    <span data-ttu-id="b419f-238">[![](external-authentication-services/_static/image60.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image59.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-238">[![](external-authentication-services/_static/image60.png "Click to Expand the Image")](external-authentication-services/_static/image59.png)</span></span>

<a id="MOREINFO"></a>
## <a name="additional-information"></a><span data-ttu-id="b419f-239">Informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b419f-239">Additional Information</span></span>

<span data-ttu-id="b419f-240">Pour plus d’informations sur la création d’applications qui utilisent OAuth et OpenID, consultez les URL suivantes :</span><span class="sxs-lookup"><span data-stu-id="b419f-240">For additional information about creating applications that use OAuth and OpenID, see the following URLs:</span></span>

- [<span data-ttu-id="b419f-241">https://go.Microsoft.com/fwlink/?LinkId=252166</span><span class="sxs-lookup"><span data-stu-id="b419f-241">https://go.microsoft.com/fwlink/?LinkID=252166</span></span>](https://go.microsoft.com/fwlink/?LinkID=252166)
- [<span data-ttu-id="b419f-242">https://go.Microsoft.com/fwlink/?LinkId=243995</span><span class="sxs-lookup"><span data-stu-id="b419f-242">https://go.microsoft.com/fwlink/?LinkID=243995</span></span>](https://go.microsoft.com/fwlink/?LinkID=243995)

<a id="COMBINE"></a>
### <a name="combining-external-authentication-services"></a><span data-ttu-id="b419f-243">Combinaison de Services d’authentification externe</span><span class="sxs-lookup"><span data-stu-id="b419f-243">Combining External Authentication Services</span></span>

<span data-ttu-id="b419f-244">Pour plus de souplesse, vous pouvez définir plusieurs services d’authentification externe en même temps - cela permet à votre site web des utilisateurs de l’application d’utiliser un compte à partir des services d’authentification externe activé :</span><span class="sxs-lookup"><span data-stu-id="b419f-244">For greater flexibility, you can define multiple external authentication services at the same time - this allows your web application's users to use an account from any of the enabled external authentication services:</span></span>

<span data-ttu-id="b419f-245">[![](external-authentication-services/_static/image62.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-245">[![](external-authentication-services/_static/image62.png "Click to Expand the Image")](external-authentication-services/_static/image61.png)</span></span>

<a id="FQDN"></a>
### <a name="configuring-iis-express-to-use-a-fully-qualified-domain-name"></a><span data-ttu-id="b419f-246">Configuration d’IIS Express à utiliser un nom de domaine complet</span><span class="sxs-lookup"><span data-stu-id="b419f-246">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>

<span data-ttu-id="b419f-247">Certains fournisseurs d’authentification externe ne gèrent pas le test de votre application à l’aide d’une adresse HTTP comme `http://localhost:port/`.</span><span class="sxs-lookup"><span data-stu-id="b419f-247">Some external authentication providers do not support testing your application by using an HTTP address like `http://localhost:port/`.</span></span> <span data-ttu-id="b419f-248">Pour contourner ce problème, vous pouvez ajouter un mappage de nom de domaine complet (FQDN) statique à votre fichier HOSTS et configurer les options de votre projet dans Visual Studio 2013 d’utiliser le nom de domaine complet pour le test et de déboguer.</span><span class="sxs-lookup"><span data-stu-id="b419f-248">To work around this issue, you can add a static Fully Qualified Domain Name (FQDN) mapping to your HOSTS file and configure your project options in Visual Studio 2013 to use the FQDN for testing/debugging.</span></span> <span data-ttu-id="b419f-249">Pour ce faire, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="b419f-249">To do so, use the following steps:</span></span>

- <span data-ttu-id="b419f-250">Ajoutez un nom de domaine complet statique mappage de votre fichier HOSTS :</span><span class="sxs-lookup"><span data-stu-id="b419f-250">Add a static FQDN mapping your HOSTS file:</span></span>

    1. <span data-ttu-id="b419f-251">Ouvrez une invite de commandes avec élévation de privilèges dans Windows.</span><span class="sxs-lookup"><span data-stu-id="b419f-251">Open an elevated command prompt in Windows.</span></span>
    2. <span data-ttu-id="b419f-252">Tapez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="b419f-252">Type the following command:</span></span>

        <span data-ttu-id="b419f-253"><kbd>Notepad %WinDir%\system32\drivers\etc\hosts</kbd></span><span class="sxs-lookup"><span data-stu-id="b419f-253"><kbd>notepad %WinDir%\system32\drivers\etc\hosts</kbd></span></span>
    3. <span data-ttu-id="b419f-254">Dans le fichier d’hôtes, ajoutez une entrée semblable à la suivante :</span><span class="sxs-lookup"><span data-stu-id="b419f-254">Add an entry like the following to the HOSTS file:</span></span>

        <span data-ttu-id="b419f-255"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span><span class="sxs-lookup"><span data-stu-id="b419f-255"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span></span>
    4. <span data-ttu-id="b419f-256">Enregistrez et fermez votre fichier HOSTS.</span><span class="sxs-lookup"><span data-stu-id="b419f-256">Save and close your HOSTS file.</span></span>
- <span data-ttu-id="b419f-257">Configurer votre projet Visual Studio pour utiliser le nom de domaine complet :</span><span class="sxs-lookup"><span data-stu-id="b419f-257">Configure your Visual Studio project to use the FQDN:</span></span>

    1. <span data-ttu-id="b419f-258">Lorsque votre projet est ouvert dans Visual Studio 2013, cliquez sur le **projet** menu, puis sélectionnez les propriétés de votre projet.</span><span class="sxs-lookup"><span data-stu-id="b419f-258">When your project is open in Visual Studio 2013, click the **Project** menu, and then select your project's properties.</span></span> <span data-ttu-id="b419f-259">Par exemple, vous pouvez sélectionner **WebApplication1 propriétés**.</span><span class="sxs-lookup"><span data-stu-id="b419f-259">For example, you might select **WebApplication1 Properties**.</span></span>
    2. <span data-ttu-id="b419f-260">Sélectionnez le **Web** onglet.</span><span class="sxs-lookup"><span data-stu-id="b419f-260">Select the **Web** tab.</span></span>
    3. <span data-ttu-id="b419f-261">Entrez votre nom de domaine complet pour le **Url de projet**.</span><span class="sxs-lookup"><span data-stu-id="b419f-261">Enter your FQDN for the **Project Url**.</span></span> <span data-ttu-id="b419f-262">Par exemple, vous devez entrer <kbd>http://www.wingtiptoys.com</kbd> si c’était le mappage de nom de domaine complet que vous avez ajouté à votre fichier HOSTS.</span><span class="sxs-lookup"><span data-stu-id="b419f-262">For example, you would enter <kbd>http://www.wingtiptoys.com</kbd> if that was the FQDN mapping that you added to your HOSTS file.</span></span>
- <span data-ttu-id="b419f-263">Configurer IIS Express pour utiliser le nom de domaine complet de votre application :</span><span class="sxs-lookup"><span data-stu-id="b419f-263">Configure IIS Express to use the FQDN for your application:</span></span>

    1. <span data-ttu-id="b419f-264">Ouvrez une invite de commandes avec élévation de privilèges dans Windows.</span><span class="sxs-lookup"><span data-stu-id="b419f-264">Open an elevated command prompt in Windows.</span></span>
    2. <span data-ttu-id="b419f-265">Tapez la commande suivante à votre dossier IIS Express :</span><span class="sxs-lookup"><span data-stu-id="b419f-265">Type the following command to change to your IIS Express folder:</span></span>

        <span data-ttu-id="b419f-266"><kbd>CD /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span><span class="sxs-lookup"><span data-stu-id="b419f-266"><kbd>cd /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span></span>
    3. <span data-ttu-id="b419f-267">Tapez la commande suivante pour ajouter le nom de domaine complet à votre application :</span><span class="sxs-lookup"><span data-stu-id="b419f-267">Type the following command to add the FQDN to your application:</span></span>

        <span data-ttu-id="b419f-268"><kbd>définir la configuration de appcmd.exe-section:system.applicationHost/sites / +&quot;[nom = 'WebApplication1'] .bindings. [ protocole = « http », bindingInformation ='* :80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span><span class="sxs-lookup"><span data-stu-id="b419f-268"><kbd>appcmd.exe set config -section:system.applicationHost/sites /+&quot;[name='WebApplication1'].bindings.[protocol='http',bindingInformation='*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span></span>

 <span data-ttu-id="b419f-269">Où **WebApplication1** est le nom de votre projet et **bindingInformation** contient le numéro de port et le nom de domaine complet que vous souhaitez utiliser pour votre test.</span><span class="sxs-lookup"><span data-stu-id="b419f-269">Where **WebApplication1** is the name of your project and **bindingInformation** contains the port number and FQDN that you want to use for your testing.</span></span>

<a id="OBTAIN"></a>
### <a name="how-to-obtain-your-application-settings-for-microsoft-authentication"></a><span data-ttu-id="b419f-270">Comment obtenir les paramètres de votre Application pour l’authentification Microsoft</span><span class="sxs-lookup"><span data-stu-id="b419f-270">How to Obtain your Application Settings for Microsoft Authentication</span></span>

<span data-ttu-id="b419f-271">Liaison d’une application Windows Live pour Microsoft Authentication est un processus simple.</span><span class="sxs-lookup"><span data-stu-id="b419f-271">Linking an application to Windows Live for Microsoft Authentication is a simple process.</span></span> <span data-ttu-id="b419f-272">Si vous n’avez pas déjà lié une application Windows Live, vous pouvez utiliser les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="b419f-272">If you have not already linked an application to Windows Live, you can use the following steps:</span></span>

1. <span data-ttu-id="b419f-273">Accédez à [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070) et entrez votre nom de compte Microsoft et le mot de passe lorsque vous y êtes invité, puis cliquez sur **connectez-vous**:</span><span class="sxs-lookup"><span data-stu-id="b419f-273">Browse to [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070) and enter your Microsoft account name and password when prompted, then click **Sign in**:</span></span>

    <span data-ttu-id="b419f-274">[![](external-authentication-services/_static/image64.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-274">[![](external-authentication-services/_static/image64.png "Click to Expand the Image")](external-authentication-services/_static/image63.png)</span></span>
2. <span data-ttu-id="b419f-275">Entrez le nom et la langue de votre application lorsque vous y êtes invité, puis cliquez sur **J’accepte**:</span><span class="sxs-lookup"><span data-stu-id="b419f-275">Enter the name and language of your application when prompted, and then click **I accept**:</span></span>

    <span data-ttu-id="b419f-276">[![](external-authentication-services/_static/image66.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image65.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-276">[![](external-authentication-services/_static/image66.png "Click to Expand the Image")](external-authentication-services/_static/image65.png)</span></span>
3. <span data-ttu-id="b419f-277">Sur le **paramètres de l’API** pour votre application, entrez le domaine de redirection pour votre application et la copie la **ID Client** et **question secrète du Client** pour votre projet, puis Cliquez sur **enregistrer**:</span><span class="sxs-lookup"><span data-stu-id="b419f-277">On the **API Settings** page for your application, enter the redirect domain for your application and copy the **Client ID** and **Client secret** for your project, and then click **Save**:</span></span>

    <span data-ttu-id="b419f-278">[![](external-authentication-services/_static/image68.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image67.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-278">[![](external-authentication-services/_static/image68.png "Click to Expand the Image")](external-authentication-services/_static/image67.png)</span></span>

<a id="DISABLE"></a>
### <a name="optional-disable-local-registration"></a><span data-ttu-id="b419f-279">Facultatif : Désactiver l’inscription du Local</span><span class="sxs-lookup"><span data-stu-id="b419f-279">Optional: Disable Local Registration</span></span>

<span data-ttu-id="b419f-280">La fonctionnalité de l’inscription du local ASP.NET actuelle n’empêche pas les programmes automatiques (robots) à partir de la création de membres comptes ; par exemple, en utilisant une technologie de prévention des robots et la validation comme [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span><span class="sxs-lookup"><span data-stu-id="b419f-280">The current ASP.NET local registration functionality does not prevent automated programs (bots) from creating member accounts; for example, by using a bot-prevention and validation technology like [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span></span> <span data-ttu-id="b419f-281">Pour cette raison, vous devez supprimer le lien de formulaire et d’enregistrement de connexion locale sur la page de connexion.</span><span class="sxs-lookup"><span data-stu-id="b419f-281">Because of this, you should remove the local login form and registration link on the login page.</span></span> <span data-ttu-id="b419f-282">Pour ce faire, ouvrez le  *\_Login.cshtml* page dans votre projet, puis commentez les lignes pour le panneau de connexion d’accès local et le lien d’inscription.</span><span class="sxs-lookup"><span data-stu-id="b419f-282">To do so, open the *\_Login.cshtml* page in your project, and then comment out the lines for the local login panel and the registration link.</span></span> <span data-ttu-id="b419f-283">La page résultante doit se présenter comme à l’exemple de code suivant :</span><span class="sxs-lookup"><span data-stu-id="b419f-283">The resulting page should like like the following code sample:</span></span>

[!code-html[Main](external-authentication-services/samples/sample10.html)]

<span data-ttu-id="b419f-284">Une fois que le panneau de connexion d’accès local et le lien d’inscription ont été désactivées, votre page de connexion affiche uniquement les fournisseurs d’authentification externe que vous avez activés :</span><span class="sxs-lookup"><span data-stu-id="b419f-284">Once the local login panel and the registration link have been disabled, your login page will only display the external authentication providers that you have enabled:</span></span>

<span data-ttu-id="b419f-285">[![](external-authentication-services/_static/image70.png "Cliquez pour développer l’Image")](external-authentication-services/_static/image69.png)</span><span class="sxs-lookup"><span data-stu-id="b419f-285">[![](external-authentication-services/_static/image70.png "Click to Expand the Image")](external-authentication-services/_static/image69.png)</span></span>
