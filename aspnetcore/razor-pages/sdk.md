---
title: SDK Razor ASP.NET Core
author: Rick-Anderson
description: Découvrez comment les pages Razor dans ASP.NET Core permettent de développer des scénarios orientés page de façon plus simple et plus productive qu’avec MVC.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc, seodec18
ms.date: 10/25/2018
uid: razor-pages/sdk
ms.openlocfilehash: eb4db69f71ec1e481e022192ca05b9d9d61573b9
ms.sourcegitcommit: 49faca2644590fc081d86db46ea5e29edfc28b7b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/09/2018
ms.locfileid: "53121438"
---
# <a name="aspnet-core-razor-sdk"></a><span data-ttu-id="1b888-103">SDK Razor ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="1b888-103">ASP.NET Core Razor SDK</span></span>

<span data-ttu-id="1b888-104">Par [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="1b888-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="1b888-105">Le [!INCLUDE[](~/includes/2.1-SDK.md)] inclut le `Microsoft.NET.Sdk.Razor` MSBuild SDK (Kit de développement logiciel Razor).</span><span class="sxs-lookup"><span data-stu-id="1b888-105">The [!INCLUDE[](~/includes/2.1-SDK.md)] includes the `Microsoft.NET.Sdk.Razor` MSBuild SDK (Razor SDK).</span></span> <span data-ttu-id="1b888-106">Le SDK Razor :</span><span class="sxs-lookup"><span data-stu-id="1b888-106">The Razor SDK:</span></span>

* <span data-ttu-id="1b888-107">Normalise l’expérience liée à la génération, à l’empaquetage et à la publication de projets contenant des fichiers [Razor](xref:mvc/views/razor) pour les projets ASP.NET Core basés sur MVC.</span><span class="sxs-lookup"><span data-stu-id="1b888-107">Standardizes the experience around building, packaging, and publishing projects containing [Razor](xref:mvc/views/razor) files for ASP.NET Core MVC-based projects.</span></span>
* <span data-ttu-id="1b888-108">Comprend un ensemble de cibles, de propriétés et d’éléments prédéfinis qui permettent de personnaliser la compilation des fichiers Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-108">Includes a set of predefined targets, properties, and items that allow customizing the compilation of Razor files.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1b888-109">Prérequis</span><span class="sxs-lookup"><span data-stu-id="1b888-109">Prerequisites</span></span>

[!INCLUDE[](~/includes/2.1-SDK.md)]

## <a name="using-the-razor-sdk"></a><span data-ttu-id="1b888-110">Utilisation du SDK Razor</span><span class="sxs-lookup"><span data-stu-id="1b888-110">Using the Razor SDK</span></span>

<span data-ttu-id="1b888-111">La plupart des applications web ne sont pas requis pour référencer explicitement le SDK Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-111">Most web apps aren't required to explicitly reference the Razor SDK.</span></span>

<span data-ttu-id="1b888-112">Pour utiliser le SDK Razor pour générer des bibliothèques de classes contenant des vues ou des pages Razor :</span><span class="sxs-lookup"><span data-stu-id="1b888-112">To use the Razor SDK to build class libraries containing Razor views or Razor Pages:</span></span>

* <span data-ttu-id="1b888-113">Utilisez `Microsoft.NET.Sdk.Razor` à la place de `Microsoft.NET.Sdk` :</span><span class="sxs-lookup"><span data-stu-id="1b888-113">Use `Microsoft.NET.Sdk.Razor` instead of `Microsoft.NET.Sdk`:</span></span>

  ```xml
  <Project SDK="Microsoft.NET.Sdk.Razor">
    ...
  </Project>
  ```

* <span data-ttu-id="1b888-114">En règle générale, une référence de package à `Microsoft.AspNetCore.Mvc` est nécessaire pour recevoir des dépendances supplémentaires sont nécessaires pour générer et compiler les Pages Razor et les vues Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-114">Typically, a package reference to `Microsoft.AspNetCore.Mvc` is required to receive additional dependencies that are required to build and compile Razor Pages and Razor views.</span></span> <span data-ttu-id="1b888-115">Au minimum, votre projet doit ajouter des références de package pour :</span><span class="sxs-lookup"><span data-stu-id="1b888-115">At a minimum, your project should add package references to:</span></span>

  * `Microsoft.AspNetCore.Razor.Design` 
  * `Microsoft.AspNetCore.Mvc.Razor.Extensions`
    
  <span data-ttu-id="1b888-116">Le `Microsoft.AspNetCore.Razor.Design` package fournit les tâches de compilation Razor et les cibles pour le projet.</span><span class="sxs-lookup"><span data-stu-id="1b888-116">The `Microsoft.AspNetCore.Razor.Design` package provides the Razor compilation tasks and targets for the project.</span></span>

  <span data-ttu-id="1b888-117">Les packages précédents sont inclus dans `Microsoft.AspNetCore.Mvc`.</span><span class="sxs-lookup"><span data-stu-id="1b888-117">The preceding packages are included in `Microsoft.AspNetCore.Mvc`.</span></span> <span data-ttu-id="1b888-118">Le balisage suivant montre un fichier projet qui utilise le SDK de Razor pour générer les fichiers pour une application ASP.NET Core Razor Pages Razor :</span><span class="sxs-lookup"><span data-stu-id="1b888-118">The following markup shows a project file that uses the Razor SDK to build Razor files for an ASP.NET Core Razor Pages app:</span></span>
    
  [!code-xml[](sdk/sample/RazorSDK.csproj)]

::: moniker range="= aspnetcore-2.1"

> [!WARNING]
> <span data-ttu-id="1b888-119">Le `Microsoft.AspNetCore.Razor.Design` et `Microsoft.AspNetCore.Mvc.Razor.Extensions` packages sont inclus dans le [Microsoft.AspNetCore.App métapackage](xref:fundamentals/metapackage-app).</span><span class="sxs-lookup"><span data-stu-id="1b888-119">The `Microsoft.AspNetCore.Razor.Design` and `Microsoft.AspNetCore.Mvc.Razor.Extensions` packages are included in the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app).</span></span> <span data-ttu-id="1b888-120">Toutefois, la version sans `Microsoft.AspNetCore.App` référence de package fournit un métapackage à l’application qui n’inclut pas la dernière version de `Microsoft.AspNetCore.Razor.Design`.</span><span class="sxs-lookup"><span data-stu-id="1b888-120">However, the version-less `Microsoft.AspNetCore.App` package reference provides a metapackage to the app that doesn't include the latest version of `Microsoft.AspNetCore.Razor.Design`.</span></span> <span data-ttu-id="1b888-121">Projets doivent faire référence à une version cohérente du `Microsoft.AspNetCore.Razor.Design` (ou `Microsoft.AspNetCore.Mvc`) afin que les derniers correctifs du moment de la génération pour Razor sont inclus.</span><span class="sxs-lookup"><span data-stu-id="1b888-121">Projects must reference a consistent version of `Microsoft.AspNetCore.Razor.Design` (or `Microsoft.AspNetCore.Mvc`) so that the latest build-time fixes for Razor are included.</span></span> <span data-ttu-id="1b888-122">Pour plus d’informations, consultez [ce problème GitHub](https://github.com/aspnet/Razor/issues/2553).</span><span class="sxs-lookup"><span data-stu-id="1b888-122">For more information, see [this GitHub issue](https://github.com/aspnet/Razor/issues/2553).</span></span>

::: moniker-end

### <a name="properties"></a><span data-ttu-id="1b888-123">Properties</span><span class="sxs-lookup"><span data-stu-id="1b888-123">Properties</span></span>

<span data-ttu-id="1b888-124">Les propriétés suivantes contrôlent le comportement du SDK Razor dans le cadre d’une build de projet :</span><span class="sxs-lookup"><span data-stu-id="1b888-124">The following properties control the Razor's SDK behavior as part of a project build:</span></span>

* <span data-ttu-id="1b888-125">`RazorCompileOnBuild` &ndash; Lorsque `true`, compile et émet l’assembly Razor dans le cadre de la génération du projet.</span><span class="sxs-lookup"><span data-stu-id="1b888-125">`RazorCompileOnBuild` &ndash; When `true`, compiles and emits the Razor assembly as part of building the project.</span></span> <span data-ttu-id="1b888-126">La valeur par défaut est `true`.</span><span class="sxs-lookup"><span data-stu-id="1b888-126">Defaults to `true`.</span></span>
* <span data-ttu-id="1b888-127">`RazorCompileOnPublish` &ndash; Lorsque `true`, compile et émet l’assembly Razor dans le cadre de la publication du projet.</span><span class="sxs-lookup"><span data-stu-id="1b888-127">`RazorCompileOnPublish` &ndash; When `true`, compiles and emits the Razor assembly as part of publishing the project.</span></span> <span data-ttu-id="1b888-128">La valeur par défaut est `true`.</span><span class="sxs-lookup"><span data-stu-id="1b888-128">Defaults to `true`.</span></span>

<span data-ttu-id="1b888-129">Les propriétés et les éléments dans le tableau suivant sont utilisés pour configurer les entrées et sortie pour le SDK Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-129">The properties and items in the following table are used to configure inputs and output to the Razor SDK.</span></span>

| <span data-ttu-id="1b888-130">Éléments</span><span class="sxs-lookup"><span data-stu-id="1b888-130">Items</span></span> | <span data-ttu-id="1b888-131">Description</span><span class="sxs-lookup"><span data-stu-id="1b888-131">Description</span></span> |
| ----- | ----------- |
| `RazorGenerate` | <span data-ttu-id="1b888-132">Composants d’élément (fichiers *.cshtml*) fournis en entrée aux cibles de génération de code.</span><span class="sxs-lookup"><span data-stu-id="1b888-132">Item elements (*.cshtml* files) that are inputs to code generation targets.</span></span> |
| `RazorCompile` | <span data-ttu-id="1b888-133">Des éléments Item (*.cs* fichiers) qui sont des entrées aux cibles de compilation Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-133">Item elements (*.cs* files) that are inputs to  Razor compilation targets.</span></span> <span data-ttu-id="1b888-134">Utilisez ItemGroup pour spécifier d’autres fichiers à compiler dans l’assembly Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-134">Use this ItemGroup to specify additional files to be compiled into the Razor assembly.</span></span> |
| `RazorTargetAssemblyAttribute` | <span data-ttu-id="1b888-135">Composants d’élément utilisés pour générer le code d’attributs pour l’assembly Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-135">Item elements used to code generate attributes for the Razor assembly.</span></span> <span data-ttu-id="1b888-136">Exemple :</span><span class="sxs-lookup"><span data-stu-id="1b888-136">For example:</span></span>  <br>`RazorAssemblyAttribute`<br>`Include="System.Reflection.AssemblyMetadataAttribute"`<br>`_Parameter1="BuildSource" _Parameter2="https://docs.microsoft.com/">` |
| `RazorEmbeddedResource` | <span data-ttu-id="1b888-137">Éléments ajoutés en tant que ressources incorporées à l’assembly généré de Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-137">Item elements added as embedded resources to the generated Razor assembly.</span></span> |

| <span data-ttu-id="1b888-138">Propriété</span><span class="sxs-lookup"><span data-stu-id="1b888-138">Property</span></span> | <span data-ttu-id="1b888-139">Description</span><span class="sxs-lookup"><span data-stu-id="1b888-139">Description</span></span> |
| -------- | ----------- |
| `RazorTargetName` | <span data-ttu-id="1b888-140">Nom de fichier (sans extension) de l’assembly produit par Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-140">File name (without extension) of the assembly produced by Razor.</span></span> | 
| `RazorOutputPath` | <span data-ttu-id="1b888-141">Répertoire de sortie Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-141">The Razor output directory.</span></span> |
| `RazorCompileToolset` | <span data-ttu-id="1b888-142">Permet de déterminer l’ensemble d’outils utilisé pour générer l’assembly Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-142">Used to determine the toolset used to build the Razor assembly.</span></span> <span data-ttu-id="1b888-143">Les valeurs valides sont `Implicit`, `RazorSDK` et `PrecompilationTool`.</span><span class="sxs-lookup"><span data-stu-id="1b888-143">Valid values are `Implicit`, `RazorSDK`, and `PrecompilationTool`.</span></span> |
| `EnableDefaultContentItems` | <span data-ttu-id="1b888-144">Si la valeur est `true`, inclut certains types de fichiers, notamment des fichiers *.cshtml*, comme contenu dans le projet.</span><span class="sxs-lookup"><span data-stu-id="1b888-144">When `true`, includes certain file types, such as *.cshtml* files, as content in the project.</span></span> <span data-ttu-id="1b888-145">Lorsque référencé par le biais de `Microsoft.NET.Sdk.Web`, les fichiers sous *wwwroot* et fichiers de configuration sont également incluses.</span><span class="sxs-lookup"><span data-stu-id="1b888-145">When referenced via `Microsoft.NET.Sdk.Web`, files under *wwwroot* and config files are also included.</span></span> |
| `EnableDefaultRazorGenerateItems` | <span data-ttu-id="1b888-146">Si la valeur est `true`, inclut les fichiers *.cshtml* des éléments `Content` dans les éléments `RazorGenerate`.</span><span class="sxs-lookup"><span data-stu-id="1b888-146">When `true`, includes *.cshtml* files from `Content` items in `RazorGenerate` items.</span></span> |
| `GenerateRazorTargetAssemblyInfo` | <span data-ttu-id="1b888-147">Lorsque `true`, génère un *.cs* fichier contenant les attributs spécifiés par `RazorAssemblyAttribute` et inclut le fichier dans la sortie de la compilation.</span><span class="sxs-lookup"><span data-stu-id="1b888-147">When `true`, generates a *.cs* file containing attributes specified by `RazorAssemblyAttribute` and includes the file in the compile output.</span></span> |
| `EnableDefaultRazorTargetAssemblyInfoAttributes` | <span data-ttu-id="1b888-148">Si la valeur est `true`, ajoute un ensemble par défaut d’attributs d’assembly à `RazorAssemblyAttribute`.</span><span class="sxs-lookup"><span data-stu-id="1b888-148">When `true`, adds a default set of assembly attributes to `RazorAssemblyAttribute`.</span></span> |
| `CopyRazorGenerateFilesToPublishDirectory` | <span data-ttu-id="1b888-149">Lorsque `true`, copies `RazorGenerate` éléments (*.cshtml*) fichiers au répertoire de publication.</span><span class="sxs-lookup"><span data-stu-id="1b888-149">When `true`, copies `RazorGenerate` items (*.cshtml*) files to the publish directory.</span></span> <span data-ttu-id="1b888-150">En règle générale, les fichiers Razor ne sont pas nécessaires pour une application publiée si elles participent compilation au moment de la génération ou au moment de publier.</span><span class="sxs-lookup"><span data-stu-id="1b888-150">Typically, Razor files aren't required for a published app if they participate in compilation at build-time or publish-time.</span></span> <span data-ttu-id="1b888-151">La valeur par défaut est `false`.</span><span class="sxs-lookup"><span data-stu-id="1b888-151">Defaults to `false`.</span></span> |
| `CopyRefAssembliesToPublishDirectory` | <span data-ttu-id="1b888-152">Si la valeur est `true`, copie les éléments d’assembly de référence dans le répertoire de publication.</span><span class="sxs-lookup"><span data-stu-id="1b888-152">When `true`, copy reference assembly items to the publish directory.</span></span> <span data-ttu-id="1b888-153">En règle générale, les assemblys de référence ne sont pas nécessaires pour une application publiée si compilation Razor se produit au moment de la génération ou au moment de publier.</span><span class="sxs-lookup"><span data-stu-id="1b888-153">Typically, reference assemblies aren't required for a published app if Razor compilation occurs at build-time or publish-time.</span></span> <span data-ttu-id="1b888-154">La valeur `true` si votre application publiée nécessite une compilation de runtime.</span><span class="sxs-lookup"><span data-stu-id="1b888-154">Set to `true` if your published app requires runtime compilation.</span></span> <span data-ttu-id="1b888-155">Par exemple, la valeur est la valeur `true` si l’application modifie *.cshtml* lors de l’exécution de fichiers ou utilise des vues incorporés.</span><span class="sxs-lookup"><span data-stu-id="1b888-155">For example, set the value to `true` if the app modifies *.cshtml* files at runtime or uses embedded views.</span></span> <span data-ttu-id="1b888-156">La valeur par défaut est `false`.</span><span class="sxs-lookup"><span data-stu-id="1b888-156">Defaults to `false`.</span></span> |
| `IncludeRazorContentInPack` | <span data-ttu-id="1b888-157">Lorsque `true`, tous les éléments de contenu Razor (*.cshtml* fichiers) sont marqués pour inclusion dans le package NuGet généré.</span><span class="sxs-lookup"><span data-stu-id="1b888-157">When `true`, all Razor content items (*.cshtml* files) are marked for inclusion in the generated NuGet package.</span></span> <span data-ttu-id="1b888-158">La valeur par défaut est `false`.</span><span class="sxs-lookup"><span data-stu-id="1b888-158">Defaults to `false`.</span></span> |
| `EmbedRazorGenerateSources` | <span data-ttu-id="1b888-159">Si la valeur est `true`, ajoute des éléments RazorGenerate (*.cshtml*) comme fichiers incorporés à l’assembly Razor généré.</span><span class="sxs-lookup"><span data-stu-id="1b888-159">When `true`, adds RazorGenerate (*.cshtml*) items as embedded files to the generated Razor assembly.</span></span> <span data-ttu-id="1b888-160">La valeur par défaut est `false`.</span><span class="sxs-lookup"><span data-stu-id="1b888-160">Defaults to `false`.</span></span> |
| `UseRazorBuildServer` | <span data-ttu-id="1b888-161">Si la valeur est `true`, utilise un processus de serveur de build persistant pour décharger le travail de génération de code.</span><span class="sxs-lookup"><span data-stu-id="1b888-161">When `true`, uses a persistent build server process to offload code generation work.</span></span> <span data-ttu-id="1b888-162">Utilise par défaut la valeur de `UseSharedCompilation`.</span><span class="sxs-lookup"><span data-stu-id="1b888-162">Defaults to the value of `UseSharedCompilation`.</span></span> |

### <a name="targets"></a><span data-ttu-id="1b888-163">Cibles</span><span class="sxs-lookup"><span data-stu-id="1b888-163">Targets</span></span>

<span data-ttu-id="1b888-164">Le SDK Razor définit deux cibles principales :</span><span class="sxs-lookup"><span data-stu-id="1b888-164">The Razor SDK defines two primary targets:</span></span>

* <span data-ttu-id="1b888-165">`RazorGenerate` &ndash; Génère du code *.cs* fichiers à partir de `RazorGenerate` des éléments item.</span><span class="sxs-lookup"><span data-stu-id="1b888-165">`RazorGenerate` &ndash; Code generates *.cs* files from `RazorGenerate` item elements.</span></span> <span data-ttu-id="1b888-166">Utilisez la propriété `RazorGenerateDependsOn` pour spécifier des cibles supplémentaires pouvant s’exécuter avant ou après cette cible.</span><span class="sxs-lookup"><span data-stu-id="1b888-166">Use `RazorGenerateDependsOn` property to specify additional targets that can run before or after this target.</span></span>
* <span data-ttu-id="1b888-167">`RazorCompile` &ndash; Compile généré *.cs* dans des fichiers à un assembly de Razor.</span><span class="sxs-lookup"><span data-stu-id="1b888-167">`RazorCompile` &ndash; Compiles generated *.cs* files in to a Razor assembly.</span></span> <span data-ttu-id="1b888-168">Utilisez `RazorCompileDependsOn` pour spécifier des cibles supplémentaires qui peuvent s’exécuter avant ou après cette cible.</span><span class="sxs-lookup"><span data-stu-id="1b888-168">Use `RazorCompileDependsOn` to specify additional targets that can run before or after this target.</span></span>

### <a name="runtime-compilation-of-razor-views"></a><span data-ttu-id="1b888-169">Compilation au moment du runtime des vues Razor</span><span class="sxs-lookup"><span data-stu-id="1b888-169">Runtime compilation of Razor views</span></span>

* <span data-ttu-id="1b888-170">Par défaut, le SDK Razor ne publie pas les assemblys de référence nécessaires à l’exécution de la compilation au moment du runtime.</span><span class="sxs-lookup"><span data-stu-id="1b888-170">By default, the Razor SDK doesn't publish reference assemblies that are required to perform runtime compilation.</span></span> <span data-ttu-id="1b888-171">Cela entraîne des échecs de compilation quand le modèle d’application s’appuie sur la compilation au moment du runtime&mdash;par exemple, l’application utilise des vues incorporées ou change les vues une fois l’application publiée.</span><span class="sxs-lookup"><span data-stu-id="1b888-171">This results in compilation failures when the application model relies on runtime compilation&mdash;for example, the app uses embedded views or changes views after the app is published.</span></span> <span data-ttu-id="1b888-172">Définissez `CopyRefAssembliesToPublishDirectory` sur `true` pour continuer à publier les assemblys de référence.</span><span class="sxs-lookup"><span data-stu-id="1b888-172">Set `CopyRefAssembliesToPublishDirectory` to `true` to continue publishing reference assemblies.</span></span>

* <span data-ttu-id="1b888-173">Pour une application web, vérifiez que votre application cible le `Microsoft.NET.Sdk.Web` SDK.</span><span class="sxs-lookup"><span data-stu-id="1b888-173">For a web app, ensure your app is targeting the `Microsoft.NET.Sdk.Web` SDK.</span></span>
